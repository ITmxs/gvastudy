!function(){function e(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(c){return void n(c)}u.done?t(l):Promise.resolve(l).then(r,a)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=t.apply(n,r);function u(t){e(i,a,o,u,l,"next",t)}function l(t){e(i,a,o,u,l,"throw",t)}u(void 0)}))}}System.register(["./index-legacy.2b2c1438.js","./infoList-legacy.22629927.js","./warningBar-legacy.8bc98fe0.js","./vendor-legacy.89c3086c.js","./dictionary-legacy.f4c16c6a.js","./date-legacy.431857fb.js"],(function(e){"use strict";var n,r,a,o,i,u,l,c,s,f,m,d;return{setters:[function(e){n=e.s,r=e._},function(e){a=e.i},function(e){o=e.w},function(e){i=e.r,u=e.o,l=e.f,c=e.g,s=e.k,f=e.w,m=e.u,d=e.s},function(){},function(){}],execute:function(){var p=function(e){return n({url:"/customer/customer",method:"post",data:e})},g=function(e){return n({url:"/customer/customerList",method:"get",params:e})},h={name:"Customer",components:{warningBar:o},mixins:[a],data:function(){return{listApi:g,dialogFormVisible:!1,type:"",form:{customerName:"",customerPhoneData:""}}},created:function(){this.getTableData()},methods:{updateCustomer:function(e){var r=this;return t(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o={ID:e.ID},n({url:"/customer/customer",method:"get",params:o});case 2:a=t.sent,r.type="update",0===a.code&&(r.form=a.data.customer,r.dialogFormVisible=!0);case 5:case"end":return t.stop()}var o}),t)})))()},closeDialog:function(){this.dialogFormVisible=!1,this.form={customerName:"",customerPhoneData:""}},deleteCustomer:function(e){var r=this;return t(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.visible=!1,t.next=3,a={ID:e.ID},n({url:"/customer/customer",method:"delete",data:a});case 3:0===t.sent.code&&(r.$message({type:"success",message:"删除成功"}),1===r.tableData.length&&r.page>1&&r.page--,r.getTableData());case 5:case"end":return t.stop()}var a}),t)})))()},enterDialog:function(){var e=this;return t(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="create"===t.t0?3:"update"===t.t0?7:11;break;case 3:return t.next=5,p(e.form);case 5:return r=t.sent,t.abrupt("break",15);case 7:return t.next=9,a=e.form,n({url:"/customer/customer",method:"put",data:a});case 9:return r=t.sent,t.abrupt("break",15);case 11:return t.next=13,p(e.form);case 13:return r=t.sent,t.abrupt("break",15);case 15:0===r.code&&(e.closeDialog(),e.getTableData());case 16:case"end":return t.stop()}var a}),t)})))()},openDialog:function(){this.type="create",this.dialogFormVisible=!0}}},b={class:"gva-table-box"},v={class:"gva-btn-list"},y=d("新增"),w=d("变更"),C=s("p",null,"确定要删除吗？",-1),D={style:{"text-align":"right","margin-top":"8px"}},k=d("取消"),x=d("确定"),_=d("删除"),z={class:"gva-pagination"},V={class:"dialog-footer"},j=d("取 消"),I=d("确 定");e("default",r(h,[["render",function(e,t,n,r,a,o){var d=i("warning-bar"),p=i("el-button"),g=i("el-table-column"),h=i("el-popover"),P=i("el-table"),F=i("el-pagination"),R=i("el-input"),N=i("el-form-item"),S=i("el-form"),T=i("el-dialog");return u(),l("div",null,[c(d,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),s("div",b,[s("div",v,[c(p,{size:"mini",type:"primary",icon:"el-icon-plus",onClick:o.openDialog},{default:f((function(){return[y]})),_:1},8,["onClick"])]),c(P,{ref:"multipleTable",data:e.tableData,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:f((function(){return[c(g,{type:"selection",width:"55"}),c(g,{align:"left",label:"接入日期",width:"180"},{default:f((function(t){return[s("span",null,m(e.formatDate(t.row.CreatedAt)),1)]})),_:1}),c(g,{align:"left",label:"姓名",prop:"customerName",width:"120"}),c(g,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),c(g,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),c(g,{align:"left",label:"按钮组","min-width":"160"},{default:f((function(e){return[c(p,{size:"small",type:"text",icon:"el-icon-edit",onClick:function(t){return o.updateCustomer(e.row)}},{default:f((function(){return[w]})),_:2},1032,["onClick"]),c(h,{visible:e.row.visible,placement:"top",width:"160"},{reference:f((function(){return[c(p,{type:"text",icon:"el-icon-delete",size:"mini"},{default:f((function(){return[_]})),_:1})]})),default:f((function(){return[C,s("div",D,[c(p,{size:"mini",type:"text",onClick:function(t){return e.row.visible=!1}},{default:f((function(){return[k]})),_:2},1032,["onClick"]),c(p,{type:"primary",size:"mini",onClick:function(t){return o.deleteCustomer(e.row)}},{default:f((function(){return[x]})),_:2},1032,["onClick"])])]})),_:2},1032,["visible"])]})),_:1})]})),_:1},8,["data"]),s("div",z,[c(F,{"current-page":e.page,"page-size":e.pageSize,"page-sizes":[10,30,50,100],total:e.total,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]),c(T,{modelValue:a.dialogFormVisible,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.dialogFormVisible=e}),"before-close":o.closeDialog,title:"客户"},{footer:f((function(){return[s("div",V,[c(p,{size:"small",onClick:o.closeDialog},{default:f((function(){return[j]})),_:1},8,["onClick"]),c(p,{size:"small",type:"primary",onClick:o.enterDialog},{default:f((function(){return[I]})),_:1},8,["onClick"])])]})),default:f((function(){return[c(S,{inline:!0,model:a.form,"label-width":"80px"},{default:f((function(){return[c(N,{label:"客户名"},{default:f((function(){return[c(R,{modelValue:a.form.customerName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.form.customerName=e}),autocomplete:"off"},null,8,["modelValue"])]})),_:1}),c(N,{label:"客户电话"},{default:f((function(){return[c(R,{modelValue:a.form.customerPhoneData,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.form.customerPhoneData=e}),autocomplete:"off"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue","before-close"])])}]]))}}}))}();
