var e=(e,l,a)=>new Promise(((o,n)=>{var d=e=>{try{m(a.next(e))}catch(l){n(l)}},u=e=>{try{m(a.throw(e))}catch(l){n(l)}},m=e=>e.done?o(e.value):Promise.resolve(e.value).then(d,u);m((a=a.apply(e,l)).next())}));import{a as l,s as a}from"./system.7e5ffa46.js";import{s as o,_ as n}from"./index.bf0eadd2.js";import{r as d,o as u,f as m,g as i,w as t,F as s,l as f,k as c,s as V}from"./vendor.ab24dc3f.js";const g={name:"Config",data:()=>({config:{system:{},jwt:{},casbin:{},mysql:{},sqlite:{},redis:{},qiniu:{},tencentCOS:{},aliyunOSS:{},captcha:{},zap:{},local:{},email:{}}}),created(){return e(this,null,(function*(){yield this.initForm()}))},methods:{initForm(){return e(this,null,(function*(){const e=yield l();0===e.code&&(this.config=e.data.config)}))},reload(){},update(){return e(this,null,(function*(){0===(yield a({config:this.config})).code&&(this.$message({type:"success",message:"配置文件设置成功"}),yield this.initForm())}))},email(){return e(this,null,(function*(){var e;0===(yield o({url:"/email/emailTest",method:"post",data:e})).code?(this.$message({type:"success",message:"邮件发送成功"}),yield this.initForm()):this.$message({type:"error",message:"邮件发送失败"})}))}}},r={class:"system"},p=c("h2",null,"系统配置",-1),y=V("开启"),b=V("开启"),_=c("h2",null,"jwt签名",-1),q=c("h2",null,"Zap日志配置",-1),U=c("h2",null,"Redis admin数据库配置",-1),h=c("h2",null,"邮箱配置",-1),C=V("测试邮件"),S=c("h2",null,"casbin配置",-1),v=c("h2",null,"验证码配置",-1),O=c("h2",null,"mysql admin数据库配置",-1),x=c("h2",null,"sqlite admin数据库配置",-1),k=c("h2",null,"sqlserver admin数据库配置",-1),w=c("h2",null,"postgresql admin数据库配置",-1),z=c("h2",null,"本地上传配置",-1),I=c("h2",null,"qiniu上传配置",-1),M=V("开启"),K=V("开启"),T=c("h2",null,"腾讯云COS上传配置",-1),L=c("h2",null,"阿里云OSS上传配置",-1),P={class:"gva-btn-list"},N=V("立即更新"),D=V("重启服务（开发中）");var j=n(g,[["render",function(e,l,a,o,n,V){const g=d("el-input"),j=d("el-form-item"),F=d("el-option"),H=d("el-select"),R=d("el-checkbox"),W=d("el-button"),$=d("el-form");return u(),m("div",r,[i($,{ref:"form",model:n.config,"label-width":"100px"},{default:t((()=>[p,i(j,{label:"环境值"},{default:t((()=>[i(g,{modelValue:n.config.system.env,"onUpdate:modelValue":l[0]||(l[0]=e=>n.config.system.env=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"端口值"},{default:t((()=>[i(g,{modelValue:n.config.system.addr,"onUpdate:modelValue":l[1]||(l[1]=e=>n.config.system.addr=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"数据库类型"},{default:t((()=>[i(H,{modelValue:n.config.system.dbType,"onUpdate:modelValue":l[2]||(l[2]=e=>n.config.system.dbType=e),style:{width:"100%"}},{default:t((()=>[i(F,{value:"mysql"}),i(F,{value:"sqlite"}),i(F,{value:"sqlserver"}),i(F,{value:"postgresql"})])),_:1},8,["modelValue"])])),_:1}),i(j,{label:"Oss类型"},{default:t((()=>[i(H,{modelValue:n.config.system.ossType,"onUpdate:modelValue":l[3]||(l[3]=e=>n.config.system.ossType=e),style:{width:"100%"}},{default:t((()=>[i(F,{value:"local"}),i(F,{value:"qiniu"}),i(F,{value:"tencent-cos"}),i(F,{value:"aliyun-oss"})])),_:1},8,["modelValue"])])),_:1}),i(j,{label:"配置文件环境变量名"},{default:t((()=>[i(g,{modelValue:n.config.system.configEnv,"onUpdate:modelValue":l[4]||(l[4]=e=>n.config.system.configEnv=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"数据初始化"},{default:t((()=>[i(R,{modelValue:n.config.system.needInitData,"onUpdate:modelValue":l[5]||(l[5]=e=>n.config.system.needInitData=e)},{default:t((()=>[y])),_:1},8,["modelValue"])])),_:1}),i(j,{label:"多点登录拦截"},{default:t((()=>[i(R,{modelValue:n.config.system.useMultipoint,"onUpdate:modelValue":l[6]||(l[6]=e=>n.config.system.useMultipoint=e)},{default:t((()=>[b])),_:1},8,["modelValue"])])),_:1}),_,i(j,{label:"jwt签名"},{default:t((()=>[i(g,{modelValue:n.config.jwt.signingKey,"onUpdate:modelValue":l[7]||(l[7]=e=>n.config.jwt.signingKey=e)},null,8,["modelValue"])])),_:1}),q,i(j,{label:"级别"},{default:t((()=>[i(g,{modelValue:n.config.zap.level,"onUpdate:modelValue":l[8]||(l[8]=e=>n.config.zap.level=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"输出"},{default:t((()=>[i(g,{modelValue:n.config.zap.format,"onUpdate:modelValue":l[9]||(l[9]=e=>n.config.zap.format=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"日志前缀"},{default:t((()=>[i(g,{modelValue:n.config.zap.prefix,"onUpdate:modelValue":l[10]||(l[10]=e=>n.config.zap.prefix=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"日志文件夹"},{default:t((()=>[i(g,{modelValue:n.config.zap.director,"onUpdate:modelValue":l[11]||(l[11]=e=>n.config.zap.director=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"软链接名称"},{default:t((()=>[i(g,{modelValue:n.config.zap.linkName,"onUpdate:modelValue":l[12]||(l[12]=e=>n.config.zap.linkName=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"编码级"},{default:t((()=>[i(g,{modelValue:n.config.zap.encodeLevel,"onUpdate:modelValue":l[13]||(l[13]=e=>n.config.zap.encodeLevel=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"栈名"},{default:t((()=>[i(g,{modelValue:n.config.zap.stacktraceKey,"onUpdate:modelValue":l[14]||(l[14]=e=>n.config.zap.stacktraceKey=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"显示行"},{default:t((()=>[i(R,{modelValue:n.config.zap.showLine,"onUpdate:modelValue":l[15]||(l[15]=e=>n.config.zap.showLine=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"输出控制台"},{default:t((()=>[i(R,{modelValue:n.config.zap.logInConsole,"onUpdate:modelValue":l[16]||(l[16]=e=>n.config.zap.logInConsole=e)},null,8,["modelValue"])])),_:1}),U,i(j,{label:"db"},{default:t((()=>[i(g,{modelValue:n.config.redis.db,"onUpdate:modelValue":l[17]||(l[17]=e=>n.config.redis.db=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"addr"},{default:t((()=>[i(g,{modelValue:n.config.redis.addr,"onUpdate:modelValue":l[18]||(l[18]=e=>n.config.redis.addr=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"password"},{default:t((()=>[i(g,{modelValue:n.config.redis.password,"onUpdate:modelValue":l[19]||(l[19]=e=>n.config.redis.password=e)},null,8,["modelValue"])])),_:1}),h,i(j,{label:"接收者邮箱"},{default:t((()=>[i(g,{modelValue:n.config.email.to,"onUpdate:modelValue":l[20]||(l[20]=e=>n.config.email.to=e),placeholder:"可多个，以逗号分隔"},null,8,["modelValue"])])),_:1}),i(j,{label:"端口"},{default:t((()=>[i(g,{modelValue:n.config.email.port,"onUpdate:modelValue":l[21]||(l[21]=e=>n.config.email.port=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"发送者邮箱"},{default:t((()=>[i(g,{modelValue:n.config.email.from,"onUpdate:modelValue":l[22]||(l[22]=e=>n.config.email.from=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"host"},{default:t((()=>[i(g,{modelValue:n.config.email.host,"onUpdate:modelValue":l[23]||(l[23]=e=>n.config.email.host=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"是否为ssl"},{default:t((()=>[i(R,{modelValue:n.config.email.isSSL,"onUpdate:modelValue":l[24]||(l[24]=e=>n.config.email.isSSL=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"secret"},{default:t((()=>[i(g,{modelValue:n.config.email.secret,"onUpdate:modelValue":l[25]||(l[25]=e=>n.config.email.secret=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"测试邮件"},{default:t((()=>[i(W,{onClick:V.email},{default:t((()=>[C])),_:1},8,["onClick"])])),_:1}),S,i(j,{label:"模型地址"},{default:t((()=>[i(g,{modelValue:n.config.casbin.modelPath,"onUpdate:modelValue":l[26]||(l[26]=e=>n.config.casbin.modelPath=e)},null,8,["modelValue"])])),_:1}),v,i(j,{label:"keyLong"},{default:t((()=>[i(g,{modelValue:n.config.captcha.keyLong,"onUpdate:modelValue":l[27]||(l[27]=e=>n.config.captcha.keyLong=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"imgWidth"},{default:t((()=>[i(g,{modelValue:n.config.captcha.imgWidth,"onUpdate:modelValue":l[28]||(l[28]=e=>n.config.captcha.imgWidth=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"imgHeight"},{default:t((()=>[i(g,{modelValue:n.config.captcha.imgHeight,"onUpdate:modelValue":l[29]||(l[29]=e=>n.config.captcha.imgHeight=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),"mysql"===n.config.system.dbType?(u(),m(s,{key:0},[O,i(j,{label:"username"},{default:t((()=>[i(g,{modelValue:n.config.mysql.username,"onUpdate:modelValue":l[30]||(l[30]=e=>n.config.mysql.username=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"password"},{default:t((()=>[i(g,{modelValue:n.config.mysql.password,"onUpdate:modelValue":l[31]||(l[31]=e=>n.config.mysql.password=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"path"},{default:t((()=>[i(g,{modelValue:n.config.mysql.path,"onUpdate:modelValue":l[32]||(l[32]=e=>n.config.mysql.path=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"dbname"},{default:t((()=>[i(g,{modelValue:n.config.mysql.dbname,"onUpdate:modelValue":l[33]||(l[33]=e=>n.config.mysql.dbname=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"maxIdleConns"},{default:t((()=>[i(g,{modelValue:n.config.mysql.maxIdleConns,"onUpdate:modelValue":l[34]||(l[34]=e=>n.config.mysql.maxIdleConns=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"maxOpenConns"},{default:t((()=>[i(g,{modelValue:n.config.mysql.maxOpenConns,"onUpdate:modelValue":l[35]||(l[35]=e=>n.config.mysql.maxOpenConns=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"logMode"},{default:t((()=>[i(R,{modelValue:n.config.mysql.logMode,"onUpdate:modelValue":l[36]||(l[36]=e=>n.config.mysql.logMode=e)},null,8,["modelValue"])])),_:1})],64)):f("",!0),"sqlite"===n.config.system.dbType?(u(),m(s,{key:1},[x,i(j,{label:"path"},{default:t((()=>[i(g,{modelValue:n.config.mysql.path,"onUpdate:modelValue":l[37]||(l[37]=e=>n.config.mysql.path=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"maxIdleConns"},{default:t((()=>[i(g,{modelValue:n.config.mysql.maxIdleConns,"onUpdate:modelValue":l[38]||(l[38]=e=>n.config.mysql.maxIdleConns=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"maxOpenConns"},{default:t((()=>[i(g,{modelValue:n.config.mysql.maxOpenConns,"onUpdate:modelValue":l[39]||(l[39]=e=>n.config.mysql.maxOpenConns=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"logger"},{default:t((()=>[i(R,{modelValue:n.config.mysql.logger,"onUpdate:modelValue":l[40]||(l[40]=e=>n.config.mysql.logger=e)},null,8,["modelValue"])])),_:1})],64)):f("",!0),"sqlserver"===n.config.system.dbType?(u(),m(s,{key:2},[k,i(j,{label:"username"},{default:t((()=>[i(g,{modelValue:n.config.sqlserver.username,"onUpdate:modelValue":l[41]||(l[41]=e=>n.config.sqlserver.username=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"password"},{default:t((()=>[i(g,{modelValue:n.config.sqlserver.password,"onUpdate:modelValue":l[42]||(l[42]=e=>n.config.sqlserver.password=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"path"},{default:t((()=>[i(g,{modelValue:n.config.sqlserver.path,"onUpdate:modelValue":l[43]||(l[43]=e=>n.config.sqlserver.path=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"dbname"},{default:t((()=>[i(g,{modelValue:n.config.sqlserver.dbname,"onUpdate:modelValue":l[44]||(l[44]=e=>n.config.sqlserver.dbname=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"maxIdleConns"},{default:t((()=>[i(g,{modelValue:n.config.sqlserver.maxIdleConns,"onUpdate:modelValue":l[45]||(l[45]=e=>n.config.sqlserver.maxIdleConns=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"maxOpenConns"},{default:t((()=>[i(g,{modelValue:n.config.sqlserver.maxOpenConns,"onUpdate:modelValue":l[46]||(l[46]=e=>n.config.sqlserver.maxOpenConns=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"logger"},{default:t((()=>[i(R,{modelValue:n.config.sqlserver.logger,"onUpdate:modelValue":l[47]||(l[47]=e=>n.config.sqlserver.logger=e)},null,8,["modelValue"])])),_:1})],64)):f("",!0),"postgresql"===n.config.system.dbType?(u(),m(s,{key:3},[w,i(j,{label:"username"},{default:t((()=>[i(g,{modelValue:n.config.mysql.username,"onUpdate:modelValue":l[48]||(l[48]=e=>n.config.mysql.username=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"password"},{default:t((()=>[i(g,{modelValue:n.config.mysql.password,"onUpdate:modelValue":l[49]||(l[49]=e=>n.config.mysql.password=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"dbName"},{default:t((()=>[i(g,{modelValue:n.config.mysql.dbName,"onUpdate:modelValue":l[50]||(l[50]=e=>n.config.mysql.dbName=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"port"},{default:t((()=>[i(g,{modelValue:n.config.mysql.port,"onUpdate:modelValue":l[51]||(l[51]=e=>n.config.mysql.port=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"config"},{default:t((()=>[i(g,{modelValue:n.config.mysql.config,"onUpdate:modelValue":l[52]||(l[52]=e=>n.config.mysql.config=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"maxIdleConns"},{default:t((()=>[i(g,{modelValue:n.config.mysql.maxIdleConns,"onUpdate:modelValue":l[53]||(l[53]=e=>n.config.mysql.maxIdleConns=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"maxOpenConns"},{default:t((()=>[i(g,{modelValue:n.config.mysql.maxOpenConns,"onUpdate:modelValue":l[54]||(l[54]=e=>n.config.mysql.maxOpenConns=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),i(j,{label:"logger"},{default:t((()=>[i(R,{modelValue:n.config.mysql.logger,"onUpdate:modelValue":l[55]||(l[55]=e=>n.config.mysql.logger=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"prefer-simple-protocol"},{default:t((()=>[i(R,{modelValue:n.config.mysql.preferSimpleProtocol,"onUpdate:modelValue":l[56]||(l[56]=e=>n.config.mysql.preferSimpleProtocol=e)},null,8,["modelValue"])])),_:1})],64)):f("",!0),"local"===n.config.system.ossType?(u(),m(s,{key:4},[z,i(j,{label:"本地文件路径"},{default:t((()=>[i(g,{modelValue:n.config.local.path,"onUpdate:modelValue":l[57]||(l[57]=e=>n.config.local.path=e)},null,8,["modelValue"])])),_:1})],64)):f("",!0),"qiniu"===n.config.system.ossType?(u(),m(s,{key:5},[I,i(j,{label:"存储区域"},{default:t((()=>[i(g,{modelValue:n.config.qiniu.zone,"onUpdate:modelValue":l[58]||(l[58]=e=>n.config.qiniu.zone=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"空间名称"},{default:t((()=>[i(g,{modelValue:n.config.qiniu.bucket,"onUpdate:modelValue":l[59]||(l[59]=e=>n.config.qiniu.bucket=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"CDN加速域名"},{default:t((()=>[i(g,{modelValue:n.config.qiniu.imgPath,"onUpdate:modelValue":l[60]||(l[60]=e=>n.config.qiniu.imgPath=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"是否使用https"},{default:t((()=>[i(R,{modelValue:n.config.qiniu.useHttps,"onUpdate:modelValue":l[61]||(l[61]=e=>n.config.qiniu.useHttps=e)},{default:t((()=>[M])),_:1},8,["modelValue"])])),_:1}),i(j,{label:"accessKey"},{default:t((()=>[i(g,{modelValue:n.config.qiniu.accessKey,"onUpdate:modelValue":l[62]||(l[62]=e=>n.config.qiniu.accessKey=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"secretKey"},{default:t((()=>[i(g,{modelValue:n.config.qiniu.secretKey,"onUpdate:modelValue":l[63]||(l[63]=e=>n.config.qiniu.secretKey=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"上传是否使用CDN上传加速"},{default:t((()=>[i(R,{modelValue:n.config.qiniu.useCdnDomains,"onUpdate:modelValue":l[64]||(l[64]=e=>n.config.qiniu.useCdnDomains=e)},{default:t((()=>[K])),_:1},8,["modelValue"])])),_:1})],64)):f("",!0),"tencent-cos"===n.config.system.ossType?(u(),m(s,{key:6},[T,i(j,{label:"bucket"},{default:t((()=>[i(g,{modelValue:n.config.tencentCOS.bucket,"onUpdate:modelValue":l[65]||(l[65]=e=>n.config.tencentCOS.bucket=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"region"},{default:t((()=>[i(g,{modelValue:n.config.tencentCOS.region,"onUpdate:modelValue":l[66]||(l[66]=e=>n.config.tencentCOS.region=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"secretID"},{default:t((()=>[i(g,{modelValue:n.config.tencentCOS.secretID,"onUpdate:modelValue":l[67]||(l[67]=e=>n.config.tencentCOS.secretID=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"secretKey"},{default:t((()=>[i(g,{modelValue:n.config.tencentCOS.secretKey,"onUpdate:modelValue":l[68]||(l[68]=e=>n.config.tencentCOS.secretKey=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"pathPrefix"},{default:t((()=>[i(g,{modelValue:n.config.tencentCOS.pathPrefix,"onUpdate:modelValue":l[69]||(l[69]=e=>n.config.tencentCOS.pathPrefix=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"baseURL"},{default:t((()=>[i(g,{modelValue:n.config.tencentCOS.baseURL,"onUpdate:modelValue":l[70]||(l[70]=e=>n.config.tencentCOS.baseURL=e)},null,8,["modelValue"])])),_:1})],64)):f("",!0),"aliyun-oss"===n.config.system.ossType?(u(),m(s,{key:7},[L,i(j,{label:"endpoint"},{default:t((()=>[i(g,{modelValue:n.config.aliyunOSS.endpoint,"onUpdate:modelValue":l[71]||(l[71]=e=>n.config.aliyunOSS.endpoint=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"accessKeyId"},{default:t((()=>[i(g,{modelValue:n.config.aliyunOSS.accessKeyId,"onUpdate:modelValue":l[72]||(l[72]=e=>n.config.aliyunOSS.accessKeyId=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"accessKeySecret"},{default:t((()=>[i(g,{modelValue:n.config.aliyunOSS.accessKeySecret,"onUpdate:modelValue":l[73]||(l[73]=e=>n.config.aliyunOSS.accessKeySecret=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"bucketName"},{default:t((()=>[i(g,{modelValue:n.config.aliyunOSS.bucketName,"onUpdate:modelValue":l[74]||(l[74]=e=>n.config.aliyunOSS.bucketName=e)},null,8,["modelValue"])])),_:1}),i(j,{label:"bucketUrl"},{default:t((()=>[i(g,{modelValue:n.config.aliyunOSS.bucketUrl,"onUpdate:modelValue":l[75]||(l[75]=e=>n.config.aliyunOSS.bucketUrl=e)},null,8,["modelValue"])])),_:1})],64)):f("",!0)])),_:1},8,["model"]),c("div",P,[i(W,{type:"primary",size:"mini",onClick:V.update},{default:t((()=>[N])),_:1},8,["onClick"]),i(W,{type:"primary",size:"mini",onClick:V.reload},{default:t((()=>[D])),_:1},8,["onClick"])])])}]]);export{j as default};
