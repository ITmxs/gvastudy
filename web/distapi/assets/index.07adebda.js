var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(s,t,o)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,r=(e,s)=>{for(var t in s||(s={}))i.call(s,t)&&a(e,t,s[t]);if(o)for(var t of o(s))l.call(s,t)&&a(e,t,s[t]);return e},n=(e,o)=>s(e,t(o));import d from"./index.26014b13.js";import u from"./history.9dde0c7d.js";import c from"./index.0d3e7d8c.js";import h from"./search.17da3a00.js";import m from"./bottomInfo.f346f121.js";import{G as p,t as f,r as g,H as b,o as y,x as C,w,g as x,n as _,k,f as S,u as v,B as I,l as j,T as M,A as P,F,I as O,K as $,y as A,s as B}from"./vendor.ab24dc3f.js";import{C as N}from"./index.921bfd6e.js";import L from"./index.2835ddf4.js";import{_ as U,e as G,a as H}from"./index.bf0eadd2.js";import"./index.abc08017.js";import"./menuItem.b0e5d76f.js";import"./asyncSubmenu.50de848e.js";const D={name:"Layout",components:{Aside:d,HistoryComponent:u,Screenfull:c,Search:h,BottomInfo:m,CustomPic:N,Setting:L},data:()=>({show:!1,isCollapse:!1,isSider:!0,isMobile:!1,isShadowBg:!1,loadingFlag:!1,reloadFlag:!0,value:""}),computed:n(r({},p("user",["userInfo","sideMode","baseColor"])),{textColor(){return"dark"===this.$store.getters["user/sideMode"]?"#fff":"light"===this.$store.getters["user/sideMode"]?"#191a23":this.baseColor},backgroundColor(){return"dark"===this.sideMode?"#191a23":"light"===this.sideMode?"#fff":this.sideMode},title(){return this.$route.meta.title||"当前页面"},matched(){return this.$route.matched}}),created(){const e=document.body.clientWidth;e<1e3?(this.isMobile=!0,this.isSider=!1,this.isCollapse=!0):e>=1e3&&e<1200?(this.isMobile=!1,this.isSider=!1,this.isCollapse=!0):(this.isMobile=!1,this.isSider=!0,this.isCollapse=!1)},mounted(){G.emit("collapse",this.isCollapse),G.emit("mobile",this.isMobile),G.on("reload",this.reload),G.on("showLoading",(()=>{this.loadingFlag=!0})),G.on("closeLoading",(()=>{this.loadingFlag=!1})),window.onresize=()=>(()=>{const e=document.body.clientWidth;e<1e3?(this.isMobile=!0,this.isSider=!1,this.isCollapse=!0):e>=1e3&&e<1200?(this.isMobile=!1,this.isSider=!1,this.isCollapse=!0):(this.isMobile=!1,this.isSider=!0,this.isCollapse=!1),G.emit("collapse",this.isCollapse),G.emit("mobile",this.isMobile)})()},methods:n(r({},f("user",["LoginOut","GetUserInfo"])),{changeUserAuth(e){return s=this,t=null,o=function*(){0===(yield H({authorityId:e})).code&&(G.emit("closeAllPage"),setTimeout((()=>{window.location.reload()}),1))},new Promise(((e,i)=>{var l=e=>{try{r(o.next(e))}catch(s){i(s)}},a=e=>{try{r(o.throw(e))}catch(s){i(s)}},r=s=>s.done?e(s.value):Promise.resolve(s.value).then(l,a);r((o=o.apply(s,t)).next())}));var s,t,o},reload(){this.reloadFlag=!1,this.$nextTick((()=>{this.reloadFlag=!0}))},totalCollapse(){this.isCollapse=!this.isCollapse,this.isSider=!this.isCollapse,this.isShadowBg=!this.isCollapse,G.emit("collapse",this.isCollapse)},toPerson(){this.$router.push({name:"person"})},changeShadow(){this.isShadowBg=!this.isShadowBg,this.isSider=!!this.isCollapse,this.totalCollapse()}})},E=["src"],T={key:0,class:"el-icon-s-unfold"},z={key:1,class:"el-icon-s-fold"},V={class:"right-box"},W={class:"dp-flex justify-content-center align-items height-full width-full"},K={class:"header-avatar",style:{cursor:"pointer"}},q={style:{"margin-left":"5px"}},J=k("i",{class:"el-icon-arrow-down"},null,-1),Q={style:{"font-weight":"600"}},R=B("个人信息"),X=B("登 出");var Y=U(D,[["render",function(e,s,t,o,i,l){const a=g("el-row"),r=g("Aside"),n=g("el-aside"),d=g("el-col"),u=g("el-breadcrumb-item"),c=g("el-breadcrumb"),h=g("Search"),m=g("Screenfull"),p=g("CustomPic"),f=g("el-dropdown-item"),N=g("el-dropdown-menu"),L=g("el-dropdown"),U=g("el-header"),G=g("HistoryComponent"),H=g("router-view"),D=g("BottomInfo"),Y=g("setting"),Z=g("el-main"),ee=g("el-container"),se=b("loading");return y(),C(ee,{class:"layout-cont"},{default:w((()=>[x(ee,{class:_([i.isSider?"openside":"hideside",i.isMobile?"mobile":""])},{default:w((()=>[x(a,{class:_([i.isShadowBg?"shadowBg":""]),onClick:s[0]||(s[0]=e=>l.changeShadow())},null,8,["class"]),x(n,{class:"main-cont main-left"},{default:w((()=>[k("div",{class:"tilte",style:I({background:l.backgroundColor})},[k("img",{alt:"",class:"logoimg",src:e.$GIN_VUE_ADMIN.appLogo},null,8,E),i.isSider?(y(),S("h2",{key:0,class:"tit-text",style:I({color:l.textColor})},v(e.$GIN_VUE_ADMIN.appName),5)):j("",!0)],4),x(r,{class:"aside"})])),_:1}),x(Z,{class:"main-cont main-right"},{default:w((()=>[x(M,{duration:{enter:800,leave:100},mode:"out-in",name:"el-fade-in-linear"},{default:w((()=>[k("div",{style:I({width:`calc(100% - ${i.isMobile?"0px":i.isCollapse?"54px":"220px"})`}),class:"topfix"},[x(a,null,{default:w((()=>[x(d,null,{default:w((()=>[x(U,{class:"header-cont"},{default:w((()=>[x(a,{class:"pd-0"},{default:w((()=>[x(d,{xs:2,lg:1,md:1,sm:1,xl:1,style:{"z-index":"100"}},{default:w((()=>[k("div",{class:"menu-total",onClick:s[1]||(s[1]=(...e)=>l.totalCollapse&&l.totalCollapse(...e))},[i.isCollapse?(y(),S("i",T)):(y(),S("i",z))])])),_:1}),x(d,{xs:10,lg:14,md:14,sm:9,xl:14,pull:1},{default:w((()=>[x(c,{class:"breadcrumb"},{default:w((()=>[(y(!0),S(F,null,P(l.matched.slice(1,l.matched.length),(e=>(y(),C(u,{key:e.path},{default:w((()=>[B(v(e.meta.title),1)])),_:2},1024)))),128))])),_:1})])),_:1}),x(d,{xs:12,lg:9,md:9,sm:14,xl:9},{default:w((()=>[k("div",V,[x(h),x(m,{class:"screenfull",style:{cursor:"pointer"}}),x(L,null,{dropdown:w((()=>[x(N,{class:"dropdown-group"},{default:w((()=>[x(f,null,{default:w((()=>[k("span",Q," 当前角色："+v(e.userInfo.authority.authorityName),1)])),_:1}),e.userInfo.authorities?(y(!0),S(F,{key:0},P(e.userInfo.authorities.filter((s=>s.authorityId!==e.userInfo.authorityId)),(e=>(y(),C(f,{key:e.authorityId,onClick:s=>l.changeUserAuth(e.authorityId)},{default:w((()=>[k("span",null," 切换为："+v(e.authorityName),1)])),_:2},1032,["onClick"])))),128)):j("",!0),x(f,{icon:"el-icon-s-custom",onClick:l.toPerson},{default:w((()=>[R])),_:1},8,["onClick"]),x(f,{icon:"el-icon-table-lamp",onClick:e.LoginOut},{default:w((()=>[X])),_:1},8,["onClick"])])),_:1})])),default:w((()=>[k("div",W,[k("span",K,[x(p),k("span",q,v(e.userInfo.nickName),1),J])])])),_:1})])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),x(G,{ref:"layoutHistoryComponent"},null,512)],4)])),_:1}),e.$route.meta.keepAlive&&i.reloadFlag?O((y(),C(H,{key:0,"element-loading-text":"正在加载中",class:"admin-box"},{default:w((({Component:e})=>[x(M,{mode:"out-in",name:"el-fade-in-linear"},{default:w((()=>[(y(),C($,null,[(y(),C(A(e)))],1024))])),_:2},1024)])),_:1},512)),[[se,i.loadingFlag]]):j("",!0),!e.$route.meta.keepAlive&&i.reloadFlag?O((y(),C(H,{key:1,"element-loading-text":"正在加载中",class:"admin-box"},{default:w((({Component:e})=>[x(M,{mode:"out-in",name:"el-fade-in-linear"},{default:w((()=>[(y(),C(A(e)))])),_:2},1024)])),_:1},512)),[[se,i.loadingFlag]]):j("",!0),x(D),x(Y)])),_:1})])),_:1},8,["class"])])),_:1})}]]);export{Y as default};
