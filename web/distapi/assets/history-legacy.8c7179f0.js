!function(){function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function e(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?t(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s=document.createElement("style");s.innerHTML='.contextmenu{width:100px;margin:0;border:1px solid #ccc;background:#fff;z-index:3000;position:absolute;list-style-type:none;padding:5px 0;border-radius:4px;font-size:14px;color:#333;box-shadow:2px 2px 3px #0003}.el-tabs__item .el-icon-close{color:initial!important}.el-tabs__item .dot{content:"";width:9px;height:9px;margin-right:8px;display:inline-block;border-radius:50%;transition:background-color .2s}.contextmenu li{margin:0;padding:7px 16px}.contextmenu li:hover{background:#f2f2f2;cursor:pointer}\n',document.head.appendChild(s),System.register(["./vendor-legacy.89c3086c.js","./index-legacy.2b2c1438.js"],(function(t){"use strict";var i,s,n,r,o,a,u,c,l,h,f,m,y,p,d,b,g,v;return{setters:[function(t){i=t.G,s=t.r,n=t.o,r=t.f,o=t.g,a=t.w,u=t.F,c=t.A,l=t.L,h=t.I,f=t.M,m=t.k,y=t.B,p=t.x,d=t.s,b=t.u},function(t){g=t._,v=t.e}],execute:function(){var x=function(t){return t.name+JSON.stringify(t.query)+JSON.stringify(t.params)},O={name:"HistoryComponent",data:function(){return{historys:[],activeValue:"",contextMenuVisible:!1,left:0,top:0,isCollapse:!1,isMobile:!1,rightActive:""}},computed:e(e({},i("user",["userInfo","activeColor"])),{},{defaultRouter:function(){return this.userInfo.authority.defaultRouter}}),watch:{contextMenuVisible:function(){var t=this;this.contextMenuVisible?document.body.addEventListener("click",(function(){t.contextMenuVisible=!1})):document.body.removeEventListener("click",(function(){t.contextMenuVisible=!1}))},$route:function(t,e){"Login"!==t.name&&(this.historys=this.historys.filter((function(t){return!t.meta.closeTab})),this.setTab(t),sessionStorage.setItem("historys",JSON.stringify(this.historys)),this.activeValue=window.sessionStorage.getItem("activeValue"),e&&t&&e.name===t.name&&v.emit("reload"))}},created:function(){var t=this;v.on("closeThisPage",(function(){t.removeTab(t.name(t.$route))})),v.on("closeAllPage",(function(){t.closeAll()})),v.on("mobile",(function(e){t.isMobile=e})),v.on("collapse",(function(e){t.isCollapse=e}));var e=[{name:this.defaultRouter,meta:{title:"首页"},query:{},params:{}}];this.historys=JSON.parse(sessionStorage.getItem("historys"))||e,window.sessionStorage.getItem("activeValue")?this.activeValue=window.sessionStorage.getItem("activeValue"):this.activeValue=x(this.$route),this.setTab(this.$route)},beforeDestroy:function(){v.off("collapse"),v.off("mobile")},methods:{name:function(t){return t.name+JSON.stringify(t.query)+JSON.stringify(t.params)},openContextMenu:function(t){if(1===this.historys.length&&this.$route.name===this.defaultRouter)return!1;var e,i="";(i="SPAN"===t.srcElement.nodeName?t.srcElement.offsetParent.id:t.srcElement.id)&&(this.contextMenuVisible=!0,e=this.isCollapse?54:220,this.isMobile&&(e=0),this.left=t.clientX-e,this.top=t.clientY+10,this.rightActive=i.split("-")[1])},closeAll:function(){this.historys=[{name:this.defaultRouter,meta:{title:"首页"},query:{},params:{}}],this.$router.push({name:this.defaultRouter}),this.contextMenuVisible=!1,sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeLeft:function(){var t,e=this,i=this.historys.findIndex((function(i){return x(i)===e.rightActive&&(t=i),x(i)===e.rightActive})),s=this.historys.findIndex((function(t){return x(t)===e.activeValue}));this.historys.splice(0,i),i>s&&this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeRight:function(){var t,e=this,i=this.historys.findIndex((function(i){return x(i)===e.rightActive&&(t=i),x(i)===e.rightActive})),s=this.historys.findIndex((function(t){return x(t)===e.activeValue}));this.historys.splice(i+1,this.historys.length),i<s&&this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeOther:function(){var t,e=this;this.historys=this.historys.filter((function(i){return x(i)===e.rightActive&&(t=i),x(i)===e.rightActive})),this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},isSame:function(t,e){if(t.name!==e.name)return!1;for(var i in t.query)if(t.query[i]!==e.query[i])return!1;for(var s in t.params)if(t.params[s]!==e.params[s])return!1;return!0},setTab:function(t){var e=this;if(!this.historys.some((function(i){return e.isSame(i,t)}))){var i={};i.name=t.name,i.meta=t.meta,i.query=t.query,i.params=t.params,this.historys.push(i)}window.sessionStorage.setItem("activeValue",x(this.$route))},changeTab:function(t){var e=t.instance.attrs.tab;this.$router.push({name:e.name,query:e.query,params:e.params})},removeTab:function(t){var e=this.historys.findIndex((function(e){return x(e)===t}));x(this.$route)===t&&(1===this.historys.length?this.$router.push({name:this.defaultRouter}):e<this.historys.length-1?this.$router.push({name:this.historys[e+1].name,query:this.historys[e+1].query,params:this.historys[e+1].params}):this.$router.push({name:this.historys[e-1].name,query:this.historys[e-1].query,params:this.historys[e-1].params})),this.historys.splice(e,1)}}},S={class:"router-history"};t("default",g(O,[["render",function(t,e,i,g,v,x){var O=s("el-tab-pane"),V=s("el-tabs");return n(),r("div",S,[o(V,{modelValue:v.activeValue,"onUpdate:modelValue":e[0]||(e[0]=function(t){return v.activeValue=t}),closable:!(1===v.historys.length&&t.$route.name===x.defaultRouter),type:"card",onContextmenu:e[1]||(e[1]=l((function(t){return x.openContextMenu(t)}),["prevent"])),onTabClick:x.changeTab,onTabRemove:x.removeTab},{default:a((function(){return[(n(!0),r(u,null,c(v.historys,(function(e){return n(),p(O,{key:x.name(e),label:e.meta.title,name:x.name(e),tab:e,class:"gva-tab"},{label:a((function(){return[m("span",{style:y({color:v.activeValue===x.name(e)?t.activeColor:"#333"})},[m("i",{class:"dot",style:y({backgroundColor:v.activeValue===x.name(e)?t.activeColor:"#ddd"})},null,4),d(" "+b(e.meta.title),1)],4)]})),_:2},1032,["label","name","tab"])})),128))]})),_:1},8,["modelValue","closable","onTabClick","onTabRemove"]),h(m("ul",{style:y({left:v.left+"px",top:v.top+"px"}),class:"contextmenu"},[m("li",{onClick:e[2]||(e[2]=function(){return x.closeAll&&x.closeAll.apply(x,arguments)})},"关闭所有"),m("li",{onClick:e[3]||(e[3]=function(){return x.closeLeft&&x.closeLeft.apply(x,arguments)})},"关闭左侧"),m("li",{onClick:e[4]||(e[4]=function(){return x.closeRight&&x.closeRight.apply(x,arguments)})},"关闭右侧"),m("li",{onClick:e[5]||(e[5]=function(){return x.closeOther&&x.closeOther.apply(x,arguments)})},"关闭其他")],4),[[f,v.contextMenuVisible]])])}]]))}}}))}();
