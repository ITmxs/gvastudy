!function(){function e(e,t,n,l,a,r,o){try{var i=e[r](o),u=i.value}catch(d){return void n(d)}i.done?t(u):Promise.resolve(u).then(l,a)}function t(t){return function(){var n=this,l=arguments;return new Promise((function(a,r){var o=t.apply(n,l);function i(t){e(o,a,r,i,u,"next",t)}function u(t){e(o,a,r,i,u,"throw",t)}i(void 0)}))}}var n=document.createElement("style");n.innerHTML=".warning[data-v-2e0932ab]{color:#dc143c}\n",document.head.appendChild(n),System.register(["./index-legacy.2b2c1438.js","./infoList-legacy.22629927.js","./icon-legacy.dd4ee66d.js","./warningBar-legacy.8bc98fe0.js","./vendor-legacy.89c3086c.js","./dictionary-legacy.f4c16c6a.js","./date-legacy.431857fb.js"],(function(e){"use strict";var n,l,a,r,o,i,u,d,c,s,f,m,p,h,g,b,v,w,y,V,k,_;return{setters:[function(e){n=e._,l=e.g,a=e.o,r=e.p,o=e.q,i=e.r},function(e){u=e.i},function(e){d=e.default},function(e){c=e.w},function(e){s=e.p,f=e.j,m=e.r,p=e.o,h=e.f,g=e.k,b=e.g,v=e.w,w=e.u,y=e.n,V=e.x,k=e.l,_=e.s},function(){},function(){}],execute:function(){var D={name:"Menus",components:{icon:d,warningBar:c},mixins:[u],data:function(){return{checkFlag:!1,listApi:l,dialogFormVisible:!1,dialogTitle:"新增菜单",menuOption:[{ID:"0",title:"根菜单"}],form:{ID:0,path:"",name:"",hidden:"",parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1},parameters:[]},rules:{path:[{required:!0,message:"请输入菜单name",trigger:"blur"}],component:[{required:!0,message:"请输入文件路径",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单展示名称",trigger:"blur"}]},isEdit:!1,test:""}},created:function(){var e=this;return t(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pageSize=999,t.next=3,e.getTableData();case 3:case"end":return t.stop()}}),t)})))()},methods:{addParameter:function(e){e.parameters||(this.form.parameters=[]),e.parameters.push({type:"query",key:"",value:""})},deleteParameter:function(e,t){e.splice(t,1)},changeName:function(){this.form.path=this.form.name},setOptions:function(){this.menuOption=[{ID:"0",title:"根目录"}],this.setMenuOptions(this.tableData,this.menuOption,!1)},setMenuOptions:function(e,t,n){var l=this;e&&e.forEach((function(e){if(e.children&&e.children.length){var a={title:e.meta.title,ID:String(e.ID),disabled:n||e.ID===l.form.ID,children:[]};l.setMenuOptions(e.children,a.children,n||e.ID===l.form.ID),t.push(a)}else{var r={title:e.meta.title,ID:String(e.ID),disabled:n||e.ID===l.form.ID};t.push(r)}}))},handleClose:function(e){this.initForm(),e()},load:function(e,t,n){n([{id:31,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{id:32,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"}])},deleteMenu:function(e){var n=this;this.$confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(t(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({ID:e});case 2:0===t.sent.code&&(n.$message({type:"success",message:"删除成功!"}),1===n.tableData.length&&n.page>1&&n.page--,n.getTableData());case 4:case"end":return t.stop()}}),t)})))).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},initForm:function(){this.checkFlag=!1,this.$refs.menuForm.resetFields(),this.form={ID:0,path:"",name:"",hidden:"",parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,keepAlive:""}}},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var e=this;return t(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$refs.menuForm.validate(function(){var n=t(regeneratorRuntime.mark((function t(n){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=13;break}if(!e.isEdit){t.next=7;break}return t.next=4,r(e.form);case 4:l=t.sent,t.next=10;break;case 7:return t.next=9,o(e.form);case 9:l=t.sent;case 10:0===l.code&&(e.$message({type:"success",message:e.isEdit?"编辑成功":"添加成功!"}),e.getTableData()),e.initForm(),e.dialogFormVisible=!1;case 13:case"end":return t.stop()}}),t)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()},addMenu:function(e){this.dialogTitle="新增菜单",this.form.parentId=String(e),this.isEdit=!1,this.setOptions(),this.dialogFormVisible=!0},editMenu:function(e){var n=this;return t(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dialogTitle="编辑菜单",t.next=3,i({id:e});case 3:l=t.sent,n.form=l.data.menu,n.isEdit=!0,n.setOptions(),n.dialogFormVisible=!0;case 8:case"end":return t.stop()}}),t)})))()}}};s("data-v-2e0932ab");var x={class:"gva-table-box"},I={class:"gva-btn-list"},C=_("新增根菜单"),F=_("添加子菜单"),U=_("编辑"),M=_("删除"),T={style:{display:"inline-flex"}},z=_(" 路由Path "),O=_("添加参数"),R=g("span",{style:{"font-size":"12px","margin-right":"12px"}},"如果菜单包含子菜单，请创建router-view二级路由页面或者",-1),P=_("点我设置"),j=_("新增菜单参数"),q=_("删除"),A={class:"dialog-footer"},E=_("取 消"),$=_("确 定");f();e("default",n(D,[["render",function(e,t,n,l,a,r){var o=m("el-button"),i=m("el-table-column"),u=m("el-table"),d=m("warning-bar"),c=m("el-input"),s=m("el-form-item"),f=m("el-checkbox"),_=m("el-option"),D=m("el-select"),N=m("el-cascader"),S=m("icon"),B=m("el-form"),H=m("el-dialog");return p(),h("div",null,[g("div",x,[g("div",I,[b(o,{size:"mini",type:"primary",icon:"el-icon-plus",onClick:t[0]||(t[0]=function(e){return r.addMenu("0")})},{default:v((function(){return[C]})),_:1})]),b(u,{data:e.tableData,"row-key":"ID"},{default:v((function(){return[b(i,{align:"left",label:"ID","min-width":"100",prop:"ID"}),b(i,{align:"left",label:"路由Name","show-overflow-tooltip":"","min-width":"160",prop:"name"}),b(i,{align:"left",label:"路由Path","show-overflow-tooltip":"","min-width":"160",prop:"path"}),b(i,{align:"left",label:"是否隐藏","min-width":"100",prop:"hidden"},{default:v((function(e){return[g("span",null,w(e.row.hidden?"隐藏":"显示"),1)]})),_:1}),b(i,{align:"left",label:"父节点","min-width":"90",prop:"parentId"}),b(i,{align:"left",label:"排序","min-width":"70",prop:"sort"}),b(i,{align:"left",label:"文件路径","min-width":"360",prop:"component"}),b(i,{align:"left",label:"展示名称","min-width":"120",prop:"authorityName"},{default:v((function(e){return[g("span",null,w(e.row.meta.title),1)]})),_:1}),b(i,{align:"left",label:"图标","min-width":"140",prop:"authorityName"},{default:v((function(e){return[g("i",{class:y("el-icon-".concat(e.row.meta.icon))},null,2),g("span",null,w(e.row.meta.icon),1)]})),_:1}),b(i,{align:"left",fixed:"right",label:"操作",width:"300"},{default:v((function(e){return[b(o,{size:"mini",type:"text",icon:"el-icon-plus",onClick:function(t){return r.addMenu(e.row.ID)}},{default:v((function(){return[F]})),_:2},1032,["onClick"]),b(o,{size:"mini",type:"text",icon:"el-icon-edit",onClick:function(t){return r.editMenu(e.row.ID)}},{default:v((function(){return[U]})),_:2},1032,["onClick"]),b(o,{size:"mini",type:"text",icon:"el-icon-delete",onClick:function(t){return r.deleteMenu(e.row.ID)}},{default:v((function(){return[M]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]),b(H,{modelValue:a.dialogFormVisible,"onUpdate:modelValue":t[13]||(t[13]=function(e){return a.dialogFormVisible=e}),"before-close":r.handleClose,title:a.dialogTitle},{footer:v((function(){return[g("div",A,[b(o,{size:"small",onClick:r.closeDialog},{default:v((function(){return[E]})),_:1},8,["onClick"]),b(o,{size:"small",type:"primary",onClick:r.enterDialog},{default:v((function(){return[$]})),_:1},8,["onClick"])])]})),default:v((function(){return[b(d,{title:"新增菜单，需要在角色管理内篇日志权限才可使用"}),a.dialogFormVisible?(p(),V(B,{key:0,ref:"menuForm",inline:!0,model:a.form,rules:a.rules,"label-position":"top","label-width":"85px"},{default:v((function(){return[b(s,{label:"路由Name",prop:"path",style:{width:"30%"}},{default:v((function(){return[b(c,{modelValue:a.form.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.form.name=e}),autocomplete:"off",placeholder:"唯一英文字符串",onChange:r.changeName},null,8,["modelValue","onChange"])]})),_:1}),b(s,{prop:"path",style:{width:"30%"}},{label:v((function(){return[g("div",T,[z,b(f,{modelValue:a.checkFlag,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.checkFlag=e}),style:{float:"right","margin-left":"20px"}},{default:v((function(){return[O]})),_:1},8,["modelValue"])])]})),default:v((function(){return[b(c,{modelValue:a.form.path,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.form.path=e}),disabled:!a.checkFlag,autocomplete:"off",placeholder:"建议只在后方拼接参数"},null,8,["modelValue","disabled"])]})),_:1}),b(s,{label:"是否隐藏",style:{width:"30%"}},{default:v((function(){return[b(D,{modelValue:a.form.hidden,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.form.hidden=e}),placeholder:"是否在列表隐藏"},{default:v((function(){return[b(_,{value:!1,label:"否"}),b(_,{value:!0,label:"是"})]})),_:1},8,["modelValue"])]})),_:1}),b(s,{label:"父节点ID",style:{width:"30%"}},{default:v((function(){return[b(N,{modelValue:a.form.parentId,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.form.parentId=e}),style:{width:"100%"},disabled:!a.isEdit,options:a.menuOption,props:{checkStrictly:!0,label:"title",value:"ID",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])]})),_:1}),b(s,{label:"文件路径",prop:"component",style:{width:"60%"}},{default:v((function(){return[b(c,{modelValue:a.form.component,"onUpdate:modelValue":t[6]||(t[6]=function(e){return a.form.component=e}),autocomplete:"off"},null,8,["modelValue"]),R,b(o,{size:"mini",onClick:t[7]||(t[7]=function(e){return a.form.component="view/routerHolder.vue"})},{default:v((function(){return[P]})),_:1})]})),_:1}),b(s,{label:"展示名称",prop:"meta.title",style:{width:"30%"}},{default:v((function(){return[b(c,{modelValue:a.form.meta.title,"onUpdate:modelValue":t[8]||(t[8]=function(e){return a.form.meta.title=e}),autocomplete:"off"},null,8,["modelValue"])]})),_:1}),b(s,{label:"图标",prop:"meta.icon",style:{width:"30%"}},{default:v((function(){return[b(S,{meta:a.form.meta,style:{width:"100%"}},null,8,["meta"])]})),_:1}),b(s,{label:"排序标记",prop:"sort",style:{width:"30%"}},{default:v((function(){return[b(c,{modelValue:a.form.sort,"onUpdate:modelValue":t[9]||(t[9]=function(e){return a.form.sort=e}),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]})),_:1}),b(s,{label:"KeepAlive",prop:"meta.keepAlive",style:{width:"30%"}},{default:v((function(){return[b(D,{modelValue:a.form.meta.keepAlive,"onUpdate:modelValue":t[10]||(t[10]=function(e){return a.form.meta.keepAlive=e}),style:{width:"100%"},placeholder:"是否keepAlive缓存页面"},{default:v((function(){return[b(_,{value:!1,label:"否"}),b(_,{value:!0,label:"是"})]})),_:1},8,["modelValue"])]})),_:1}),b(s,{label:"CloseTab",prop:"meta.closeTab",style:{width:"30%"}},{default:v((function(){return[b(D,{modelValue:a.form.meta.closeTab,"onUpdate:modelValue":t[11]||(t[11]=function(e){return a.form.meta.closeTab=e}),style:{width:"100%"},placeholder:"是否自动关闭tab"},{default:v((function(){return[b(_,{value:!1,label:"否"}),b(_,{value:!0,label:"是"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])):k("",!0),g("div",null,[b(o,{size:"small",type:"primary",icon:"el-icon-edit",onClick:t[12]||(t[12]=function(e){return r.addParameter(a.form)})},{default:v((function(){return[j]})),_:1}),b(u,{data:a.form.parameters,style:{width:"100%"}},{default:v((function(){return[b(i,{align:"left",prop:"type",label:"参数类型",width:"180"},{default:v((function(e){return[b(D,{modelValue:e.row.type,"onUpdate:modelValue":function(t){return e.row.type=t},placeholder:"请选择"},{default:v((function(){return[b(_,{key:"query",value:"query",label:"query"}),b(_,{key:"params",value:"params",label:"params"})]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:1}),b(i,{align:"left",prop:"key",label:"参数key",width:"180"},{default:v((function(e){return[g("div",null,[b(c,{modelValue:e.row.key,"onUpdate:modelValue":function(t){return e.row.key=t}},null,8,["modelValue","onUpdate:modelValue"])])]})),_:1}),b(i,{align:"left",prop:"value",label:"参数值"},{default:v((function(e){return[g("div",null,[b(c,{modelValue:e.row.value,"onUpdate:modelValue":function(t){return e.row.value=t}},null,8,["modelValue","onUpdate:modelValue"])])]})),_:1}),b(i,{align:"left"},{default:v((function(e){return[g("div",null,[b(o,{type:"danger",size:"small",icon:"el-icon-delete",onClick:function(t){return r.deleteParameter(a.form.parameters,e.$index)}},{default:v((function(){return[q]})),_:2},1032,["onClick"])])]})),_:1})]})),_:1},8,["data"])])]})),_:1},8,["modelValue","before-close","title"])])}],["__scopeId","data-v-2e0932ab"]]))}}}))}();
