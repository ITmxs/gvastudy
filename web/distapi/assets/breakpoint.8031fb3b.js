var t=(t,e,r)=>new Promise(((i,n)=>{var a=t=>{try{o(r.next(t))}catch(e){n(e)}},s=t=>{try{o(r.throw(t))}catch(e){n(e)}},o=t=>t.done?i(t.value):Promise.resolve(t.value).then(a,s);o((r=r.apply(t,e)).next())}));import{b as e,p as r,j as i,r as n,o as a,f as s,k as o,g as f,w as h,I as l,M as u,u as p,l as d,T as c,s as y}from"./vendor.ab24dc3f.js";import{s as g,_ as m}from"./index.bf0eadd2.js";var b={exports:{}},_=b.exports=function(t){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(t,e){var r=t[0],i=t[1],n=t[2],a=t[3];i=((i+=((n=((n+=((a=((a+=((r=((r+=(i&n|~i&a)+e[0]-680876936|0)<<7|r>>>25)+i|0)&i|~r&n)+e[1]-389564586|0)<<12|a>>>20)+r|0)&r|~a&i)+e[2]+606105819|0)<<17|n>>>15)+a|0)&a|~n&r)+e[3]-1044525330|0)<<22|i>>>10)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i&n|~i&a)+e[4]-176418897|0)<<7|r>>>25)+i|0)&i|~r&n)+e[5]+1200080426|0)<<12|a>>>20)+r|0)&r|~a&i)+e[6]-1473231341|0)<<17|n>>>15)+a|0)&a|~n&r)+e[7]-45705983|0)<<22|i>>>10)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i&n|~i&a)+e[8]+1770035416|0)<<7|r>>>25)+i|0)&i|~r&n)+e[9]-1958414417|0)<<12|a>>>20)+r|0)&r|~a&i)+e[10]-42063|0)<<17|n>>>15)+a|0)&a|~n&r)+e[11]-1990404162|0)<<22|i>>>10)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i&n|~i&a)+e[12]+1804603682|0)<<7|r>>>25)+i|0)&i|~r&n)+e[13]-40341101|0)<<12|a>>>20)+r|0)&r|~a&i)+e[14]-1502002290|0)<<17|n>>>15)+a|0)&a|~n&r)+e[15]+1236535329|0)<<22|i>>>10)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i&a|n&~a)+e[1]-165796510|0)<<5|r>>>27)+i|0)&n|i&~n)+e[6]-1069501632|0)<<9|a>>>23)+r|0)&i|r&~i)+e[11]+643717713|0)<<14|n>>>18)+a|0)&r|a&~r)+e[0]-373897302|0)<<20|i>>>12)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i&a|n&~a)+e[5]-701558691|0)<<5|r>>>27)+i|0)&n|i&~n)+e[10]+38016083|0)<<9|a>>>23)+r|0)&i|r&~i)+e[15]-660478335|0)<<14|n>>>18)+a|0)&r|a&~r)+e[4]-405537848|0)<<20|i>>>12)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i&a|n&~a)+e[9]+568446438|0)<<5|r>>>27)+i|0)&n|i&~n)+e[14]-1019803690|0)<<9|a>>>23)+r|0)&i|r&~i)+e[3]-187363961|0)<<14|n>>>18)+a|0)&r|a&~r)+e[8]+1163531501|0)<<20|i>>>12)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i&a|n&~a)+e[13]-1444681467|0)<<5|r>>>27)+i|0)&n|i&~n)+e[2]-51403784|0)<<9|a>>>23)+r|0)&i|r&~i)+e[7]+1735328473|0)<<14|n>>>18)+a|0)&r|a&~r)+e[12]-1926607734|0)<<20|i>>>12)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i^n^a)+e[5]-378558|0)<<4|r>>>28)+i|0)^i^n)+e[8]-2022574463|0)<<11|a>>>21)+r|0)^r^i)+e[11]+1839030562|0)<<16|n>>>16)+a|0)^a^r)+e[14]-35309556|0)<<23|i>>>9)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i^n^a)+e[1]-1530992060|0)<<4|r>>>28)+i|0)^i^n)+e[4]+1272893353|0)<<11|a>>>21)+r|0)^r^i)+e[7]-155497632|0)<<16|n>>>16)+a|0)^a^r)+e[10]-1094730640|0)<<23|i>>>9)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i^n^a)+e[13]+681279174|0)<<4|r>>>28)+i|0)^i^n)+e[0]-358537222|0)<<11|a>>>21)+r|0)^r^i)+e[3]-722521979|0)<<16|n>>>16)+a|0)^a^r)+e[6]+76029189|0)<<23|i>>>9)+n|0,i=((i+=((n=((n+=((a=((a+=((r=((r+=(i^n^a)+e[9]-640364487|0)<<4|r>>>28)+i|0)^i^n)+e[12]-421815835|0)<<11|a>>>21)+r|0)^r^i)+e[15]+530742520|0)<<16|n>>>16)+a|0)^a^r)+e[2]-995338651|0)<<23|i>>>9)+n|0,i=((i+=((a=((a+=(i^((r=((r+=(n^(i|~a))+e[0]-198630844|0)<<6|r>>>26)+i|0)|~n))+e[7]+1126891415|0)<<10|a>>>22)+r|0)^((n=((n+=(r^(a|~i))+e[14]-1416354905|0)<<15|n>>>17)+a|0)|~r))+e[5]-57434055|0)<<21|i>>>11)+n|0,i=((i+=((a=((a+=(i^((r=((r+=(n^(i|~a))+e[12]+1700485571|0)<<6|r>>>26)+i|0)|~n))+e[3]-1894986606|0)<<10|a>>>22)+r|0)^((n=((n+=(r^(a|~i))+e[10]-1051523|0)<<15|n>>>17)+a|0)|~r))+e[1]-2054922799|0)<<21|i>>>11)+n|0,i=((i+=((a=((a+=(i^((r=((r+=(n^(i|~a))+e[8]+1873313359|0)<<6|r>>>26)+i|0)|~n))+e[15]-30611744|0)<<10|a>>>22)+r|0)^((n=((n+=(r^(a|~i))+e[6]-1560198380|0)<<15|n>>>17)+a|0)|~r))+e[13]+1309151649|0)<<21|i>>>11)+n|0,i=((i+=((a=((a+=(i^((r=((r+=(n^(i|~a))+e[4]-145523070|0)<<6|r>>>26)+i|0)|~n))+e[11]-1120210379|0)<<10|a>>>22)+r|0)^((n=((n+=(r^(a|~i))+e[2]+718787259|0)<<15|n>>>17)+a|0)|~r))+e[9]-343485551|0)<<21|i>>>11)+n|0,t[0]=r+t[0]|0,t[1]=i+t[1]|0,t[2]=n+t[2]|0,t[3]=a+t[3]|0}function i(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}function n(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return r}function a(t){var e,n,a,s,o,f,h=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=h;e+=64)r(l,i(t.substring(e-64,e)));for(n=(t=t.substring(e-64)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(r(l,a),e=0;e<16;e+=1)a[e]=0;return s=(s=8*h).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),f=parseInt(s[1],16)||0,a[14]=o,a[15]=f,r(l,a),l}function s(t){var e,i,a,s,o,f,h=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=h;e+=64)r(l,n(t.subarray(e-64,e)));for(i=(t=e-64<h?t.subarray(e-64):new Uint8Array(0)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)a[e>>2]|=t[e]<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(r(l,a),e=0;e<16;e+=1)a[e]=0;return s=(s=8*h).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),f=parseInt(s[1],16)||0,a[14]=o,a[15]=f,r(l,a),l}function o(t){var r,i="";for(r=0;r<4;r+=1)i+=e[t>>8*r+4&15]+e[t>>8*r&15];return i}function f(t){var e;for(e=0;e<t.length;e+=1)t[e]=o(t[e]);return t.join("")}function h(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function l(t,e){var r,i=t.length,n=new ArrayBuffer(i),a=new Uint8Array(n);for(r=0;r<i;r+=1)a[r]=t.charCodeAt(r);return e?a:n}function u(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function p(t,e,r){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t)),i.set(new Uint8Array(e),t.byteLength),r?i:i.buffer}function d(t){var e,r=[],i=t.length;for(e=0;e<i-1;e+=2)r.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,r)}function c(){this.reset()}return f(a("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(r,i){var n,a,s,o,f=this.byteLength,h=e(r,f),l=f;return i!==t&&(l=e(i,f)),h>l?new ArrayBuffer(0):(n=l-h,a=new ArrayBuffer(n),s=new Uint8Array(a),o=new Uint8Array(this,h,n),s.set(o),a)}}(),c.prototype.append=function(t){return this.appendBinary(h(t)),this},c.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,n=this._buff.length;for(e=64;e<=n;e+=64)r(this._hash,i(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},c.prototype.end=function(t){var e,r,i=this._buff,n=i.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n;e+=1)a[e>>2]|=i.charCodeAt(e)<<(e%4<<3);return this._finish(a,n),r=f(this._hash),t&&(r=d(r)),this.reset(),r},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(t,e){var i,n,a,s=e;if(t[s>>2]|=128<<(s%4<<3),s>55)for(r(this._hash,t),s=0;s<16;s+=1)t[s]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(i[2],16),a=parseInt(i[1],16)||0,t[14]=n,t[15]=a,r(this._hash,t)},c.hash=function(t,e){return c.hashBinary(h(t),e)},c.hashBinary=function(t,e){var r=f(a(t));return e?d(r):r},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(t){var e,i=p(this._buff.buffer,t,!0),a=i.length;for(this._length+=t.byteLength,e=64;e<=a;e+=64)r(this._hash,n(i.subarray(e-64,e)));return this._buff=e-64<a?new Uint8Array(i.buffer.slice(e-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(t){var e,r,i=this._buff,n=i.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n;e+=1)a[e>>2]|=i[e]<<(e%4<<3);return this._finish(a,n),r=f(this._hash),t&&(r=d(r)),this.reset(),r},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var t=c.prototype.getState.call(this);return t.buff=u(t.buff),t},c.ArrayBuffer.prototype.setState=function(t){return t.buff=l(t.buff,!0),c.prototype.setState.call(this,t)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(t,e){var r=f(s(new Uint8Array(t)));return e?d(r):r},c}();const v={name:"BreakPoint",data:()=>({file:null,fileMd5:"",formDataList:[],waitUpLoad:[],waitNum:0,limitFileSize:!1,percentage:0,percentageFlage:!0,customColor:"#409eff"}),methods:{choseFile(e){return t(this,null,(function*(){const r=new FileReader,i=e.target.files[0];this.file=i,this.percentage=0,i.size<5242880?(r.readAsArrayBuffer(i),r.onload=e=>t(this,null,(function*(){const t=e.target.result,r=new _.ArrayBuffer;r.append(t),this.fileMd5=r.end();const n=1048576;let a=0,s=0,o=0;for(this.formDataList=[];s<i.size;){a=o*n,s=(o+1)*n;var f=this.file.slice(a,s);const t=new window.FormData;t.append("fileMd5",this.fileMd5),t.append("file",f),t.append("chunkNumber",o),t.append("fileName",this.file.name),this.formDataList.push({key:o,formData:t}),o++}const h={fileName:this.file.name,fileMd5:this.fileMd5,chunkTotal:this.formDataList.length},l=yield(t=>g({url:"/fileUploadAndDownload/findFile",method:"get",params:t}))(h),u=l.data.file.ExaFileChunk,p=l.data.file.IsFinish;this.waitUpLoad=p?[]:this.formDataList.filter((t=>!(u&&u.some((e=>e.FileChunkNumber===t.key))))),this.waitNum=this.waitUpLoad.length}))):(this.limitFileSize=!0,this.$message("请上传小于5M文件"))}))},getFile(){null!==this.file?(this.percentage=Math.floor((this.formDataList.length-this.waitNum)/this.formDataList.length*100),100===this.percentage&&(this.percentageFlage=!1),this.sliceFile()):this.$message("请先上传文件")},sliceFile(){this.waitUpLoad&&this.waitUpLoad.forEach((t=>{t.formData.append("chunkTotal",this.formDataList.length);const e=new FileReader,r=t.formData.get("file");e.readAsArrayBuffer(r),e.onload=e=>{const r=new _.ArrayBuffer;r.append(e.target.result),t.formData.append("chunkMd5",r.end()),this.upLoadFileSlice(t)}}))},upLoadFileSlice(r){return t(this,null,(function*(){if(yield e.post("/api/fileUploadAndDownload/breakpointContinue",r.formData),this.waitNum--,0===this.waitNum){const t={fileName:this.file.name,fileMd5:this.fileMd5},e=yield(t=>g({url:"/fileUploadAndDownload/breakpointContinueFinish",method:"post",params:t}))(t);if(e.success){const t={fileName:this.file.name,fileMd5:this.fileMd5,filePath:e.data.filePath};yield((t,e)=>g({url:"/fileUploadAndDownload/removeChunk",method:"post",data:t,params:e}))(t)}}}))},inputChange(){this.$refs.Input.dispatchEvent(new MouseEvent("click"))}}};r("data-v-18248564");const A={class:"break-point"},w={class:"gva-table-box"},B=y("大文件上传"),C={id:"fromCont",method:"post"},F=y(" 选择文件 "),U=y("上传文件"),k=o("div",{class:"el-upload__tip"},"请上传不超过5MB的文件",-1),D={class:"list"},L={key:0,class:"list-item"},M=o("i",{class:"el-icon-document"},null,-1),S={class:"percentage"},I=o("div",{class:"tips"},"此版本为先行体验功能测试版，样式美化和性能优化正在进行中，上传切片文件和合成的完整文件分别再QMPlusserver目录的breakpointDir文件夹和fileDir文件夹",-1);i();var x=m(v,[["render",function(t,e,r,i,y,g){const m=n("el-divider"),b=n("el-button"),_=n("el-progress");return a(),s("div",A,[o("div",w,[f(m,{"content-position":"left"},{default:h((()=>[B])),_:1}),o("form",C,[o("div",{class:"fileUpload",onClick:e[1]||(e[1]=(...t)=>g.inputChange&&g.inputChange(...t))},[F,l(o("input",{id:"file",ref:"Input",multiple:"multiple",type:"file",onChange:e[0]||(e[0]=(...t)=>g.choseFile&&g.choseFile(...t))},null,544),[[u,!1]])])]),f(b,{disabled:y.limitFileSize,type:"primary",size:"mini",class:"uploadBtn",onClick:g.getFile},{default:h((()=>[U])),_:1},8,["disabled","onClick"]),k,o("div",D,[f(c,{name:"list",tag:"p"},{default:h((()=>[y.file?(a(),s("div",L,[M,o("span",null,p(y.file.name),1),o("span",S,p(y.percentage)+"%",1),f(_,{"show-text":!1,"text-inside":!1,"stroke-width":2,percentage:y.percentage},null,8,["percentage"])])):d("",!0)])),_:1})]),I])])}],["__scopeId","data-v-18248564"]]);export{x as default};
