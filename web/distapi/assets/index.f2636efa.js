var e=(e,t,a)=>new Promise(((i,l)=>{var n=e=>{try{s(a.next(e))}catch(t){l(t)}},o=e=>{try{s(a.throw(e))}catch(t){l(t)}},s=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,o);s((a=a.apply(e,t)).next())}));import{e as t,f as a,r as i}from"./autoCode.260122b4.js";import{i as l}from"./infoList.89930291.js";import{_ as n}from"./index.bf0eadd2.js";import{p as o,j as s,r,o as d,f as u,k as c,g as p,w as f,s as m,u as g,x as h}from"./vendor.ab24dc3f.js";import"./dictionary.03156ab7.js";import"./date.23f5a973.js";const b={name:"Api",mixins:[l],data:()=>({listApi:t}),created(){this.getTableData()},methods:{deleteRow(t){return e(this,null,(function*(){this.$confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield a({id:Number(t.ID)})).code&&(this.$message.success("删除成功"),this.getTableData())}))))}))},rollback(t){return e(this,null,(function*(){this.$confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield i({id:Number(t.ID)})).code&&(this.$message.success("回滚成功"),this.getTableData())}))))}))},goAutoCode(e){e?this.$router.push({name:"autoCodeEdit",params:{id:e.ID}}):this.$router.push({name:"autoCode"})}}};o("data-v-6da5b3c7");const C={class:"gva-table-box"},w={class:"gva-btn-list"},y=m("新增"),v=m(" 已回滚 "),x=m(" 未回滚 "),k=m("回滚"),z=m("复用"),_=m("删除"),D={class:"gva-pagination"};s();var j=n(b,[["render",function(e,t,a,i,l,n){const o=r("el-button"),s=r("el-table-column"),b=r("el-tag"),j=r("el-table"),T=r("el-pagination");return d(),u("div",null,[c("div",C,[c("div",w,[p(o,{size:"mini",type:"primary",icon:"el-icon-plus",onClick:t[0]||(t[0]=e=>n.goAutoCode(null))},{default:f((()=>[y])),_:1})]),p(j,{data:e.tableData},{default:f((()=>[p(s,{type:"selection",width:"55"}),p(s,{align:"left",label:"id",width:"60",prop:"ID"}),p(s,{align:"left",label:"日期",width:"180"},{default:f((t=>[m(g(e.formatDate(t.row.CreatedAt)),1)])),_:1}),p(s,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),p(s,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),p(s,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),p(s,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:f((e=>[e.row.flag?(d(),h(b,{key:0,type:"danger",size:"mini",effect:"dark"},{default:f((()=>[v])),_:1})):(d(),h(b,{key:1,size:"mini",type:"success",effect:"dark"},{default:f((()=>[x])),_:1}))])),_:1}),p(s,{align:"left",label:"操作","min-width":"180"},{default:f((e=>[c("div",null,[p(o,{size:"mini",type:"text",disabled:1===e.row.flag,onClick:t=>n.rollback(e.row)},{default:f((()=>[k])),_:2},1032,["disabled","onClick"]),p(o,{size:"mini",type:"text",onClick:t=>n.goAutoCode(e.row)},{default:f((()=>[z])),_:2},1032,["onClick"]),p(o,{size:"mini",type:"text",onClick:t=>n.deleteRow(e.row)},{default:f((()=>[_])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),c("div",D,[p(T,{"current-page":e.page,"page-size":e.pageSize,"page-sizes":[10,30,50,100],total:e.total,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])])])}],["__scopeId","data-v-6da5b3c7"]]);export{j as default};
